(function(e){if("undefined"==typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var t=["scene","edges","nodes","labels"],n={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"};function a(e){if((e=e||{}).format&&!(e.format in n))throw Error('sigma.renderers.snaphot: unsupported format "'+e.format+'".');var a=this,i=this instanceof sigma.renderers.webgl,r=[],o=document.createElement("canvas"),s=o.getContext("2d"),d=!1;t.forEach(function(t){if(a.contexts[t]&&(!1!==e.labels||"labels"!==t)){var n=a.domElements[t]||a.domElements.scene,g=a.contexts[t];~r.indexOf(g)||(d||(o.width=i&&g instanceof WebGLRenderingContext?n.width/2:n.width,o.height=i&&g instanceof WebGLRenderingContext?n.height/2:n.height,d=!0,e.background&&(s.rect(0,0,o.width,o.height),s.fillStyle=e.background,s.fill())),g instanceof WebGLRenderingContext?s.drawImage(n,0,0,n.width/2,n.height/2):s.drawImage(n,0,0),r.push(g))}});var g=o.toDataURL(n[e.format||"png"],.1);return e.download&&function(e,t,n){var a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",n||"graph."+t);var i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i),delete a}(g,e.format||"png",e.filename),delete s,delete o,delete r,g}sigma.renderers.canvas.prototype.snapshot=a,sigma.renderers.webgl.prototype.snapshot=a}).call(this);